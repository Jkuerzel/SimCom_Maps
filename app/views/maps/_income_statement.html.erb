<div class="modal" tabindex="-1" id="income_statement_modal">
  <div class="modal-dialog modal-dialog-scrollable">
    <div class="modal-content" style="background-color: white; color: black;">
      <div class="modal-header">
        <h5 class="modal-title">Income Statement</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <table style="border-collapse: collapse; width: 100%; text-align: left; font-family: Arial, sans-serif;">
          <thead>
            <tr style="background-color: #f4f4f4;">
              <th style="padding: 8px; border-bottom: 2px solid #ddd;">Metric</th>
              <th style="padding: 8px; border-bottom: 2px solid #ddd; text-align: right;">Value</th>
              <th style="padding: 8px; border-bottom: 2px solid #ddd; text-align: right;">Percentage</th>
            </tr>
          </thead>
          <tbody>
            <!-- Revenue Section -->
            <tr style="background-color: #e8f4e8;">
              <td style="padding: 8px; border-bottom: 1px solid #ddd; font-weight: bold;">Total Revenue</td>
              <td style="padding: 8px; border-bottom: 1px solid #ddd; text-align: right; font-weight: bold;"><%= number_to_currency(@income_statement[:total_revenue]) %></td>
              <td style="padding: 8px; border-bottom: 1px solid #ddd; text-align: right; font-weight: bold;">100</td>
            </tr>

            <!-- COGS Section -->
            <tr>
              <td style="padding: 8px 8px 8px 24px; border-bottom: 1px solid #ddd;">Cost of Purchased Goods</td>
              <td style="padding: 8px; border-bottom: 1px solid #ddd; text-align: right;"><%= number_to_currency(@income_statement[:total_cost_of_purchased_goods]) %></td>
              <td style="padding: 8px; border-bottom: 1px solid #ddd; text-align: right;">
                <%= @income_statement[:total_revenue].to_f > 0 ? 
                  (100 * @income_statement[:total_cost_of_purchased_goods].to_f / @income_statement[:total_revenue].to_f).round : 
                  0 %>
              </td>
            </tr>
            <tr>
              <td style="padding: 8px 8px 8px 24px; border-bottom: 1px solid #ddd;">Worker Wages</td>
              <td style="padding: 8px; border-bottom: 1px solid #ddd; text-align: right;"><%= number_to_currency(@income_statement[:total_worker_wages]) %></td>
              <td style="padding: 8px; border-bottom: 1px solid #ddd; text-align: right;">
                <%= @income_statement[:total_revenue].to_f > 0 ? 
                  (100 * @income_statement[:total_worker_wages].to_f / @income_statement[:total_revenue].to_f).round : 
                  0 %>
              </td>
            </tr>
            <tr>
              <td style="padding: 8px; border-bottom: 1px solid #ddd;">Cost of Goods Sold (COGS)</td>
              <td style="padding: 8px; border-bottom: 1px solid #ddd; text-align: right;"><%= number_to_currency(@income_statement[:cogs]) %></td>
              <td style="padding: 8px; border-bottom: 1px solid #ddd; text-align: right;">
                <%= @income_statement[:total_revenue].to_f > 0 ? 
                  (100 * @income_statement[:cogs].to_f / @income_statement[:total_revenue].to_f).round : 
                  0 %>
              </td>
            </tr>

            <!-- Gross Income Section -->
            <tr style="background-color: #e8f4e8;">
              <td style="padding: 8px; border-bottom: 2px solid #ddd; font-weight: bold;">Gross Income</td>
              <td style="padding: 8px; border-bottom: 2px solid #ddd; text-align: right; font-weight: bold;"><%= number_to_currency(@income_statement[:gross_income]) %></td>
              <td style="padding: 8px; border-bottom: 2px solid #ddd; text-align: right; font-weight: bold;">
                <%= @income_statement[:total_revenue].to_f > 0 ? 
                  (100 * @income_statement[:gross_income].to_f / @income_statement[:total_revenue].to_f).round : 
                  0 %>
              </td>
            </tr>

            <!-- Operating Expenses Section -->
            <tr>
              <td style="padding: 8px; border-bottom: 1px solid #ddd;">Admin Overhead Wages</td>
              <td style="padding: 8px; border-bottom: 1px solid #ddd; text-align: right;"><%= number_to_currency(@income_statement[:total_admin_overhead_wages]) %></td>
              <td style="padding: 8px; border-bottom: 1px solid #ddd; text-align: right;">
                <%= @income_statement[:total_revenue].to_f > 0 ? 
                  (100 * @income_statement[:total_admin_overhead_wages].to_f / @income_statement[:total_revenue].to_f).round : 
                  0 %>
              </td>
            </tr>
            <tr>
              <td style="padding: 8px; border-bottom: 1px solid #ddd;">Executive Salaries</td>
              <td style="padding: 8px; border-bottom: 1px solid #ddd; text-align: right;"><%= number_to_currency(@income_statement[:executives_salaries]) %></td>
              <td style="padding: 8px; border-bottom: 1px solid #ddd; text-align: right;">
                <%= @income_statement[:total_revenue].to_f > 0 ? 
                  (100 * @income_statement[:executives_salaries].to_f / @income_statement[:total_revenue].to_f).round : 
                  0 %>
              </td>
            </tr>
            <tr>
              <td style="padding: 8px; border-bottom: 1px solid #ddd;">Total Fees Paid</td>
              <td style="padding: 8px; border-bottom: 1px solid #ddd; text-align: right;"><%= number_to_currency(@income_statement[:total_fees_paid]) %></td>
              <td style="padding: 8px; border-bottom: 1px solid #ddd; text-align: right;">
                <%= @income_statement[:total_revenue].to_f > 0 ? 
                  (100 * @income_statement[:total_fees_paid].to_f / @income_statement[:total_revenue].to_f).round : 
                  0 %>
              </td>
            </tr>
            <tr>
              <td style="padding: 8px; border-bottom: 1px solid #ddd;">Freight Out</td>
              <td style="padding: 8px; border-bottom: 1px solid #ddd; text-align: right;"><%= number_to_currency(@income_statement[:freight_out]) %></td>
              <td style="padding: 8px; border-bottom: 1px solid #ddd; text-align: right;">
                <%= @income_statement[:total_revenue].to_f > 0 ? 
                  (100 * @income_statement[:freight_out].to_f / @income_statement[:total_revenue].to_f).round : 
                  0 %>
              </td>
            </tr>

            <!-- Operating Income Section -->
            <tr style="background-color: #e8f4e8;">
              <td style="padding: 8px; border-bottom: 2px solid #ddd; font-weight: bold;">Operating Income</td>
              <td style="padding: 8px; border-bottom: 2px solid #ddd; text-align: right; font-weight: bold;"><%= number_to_currency(@income_statement[:operating_income]) %></td>
              <td style="padding: 8px; border-bottom: 2px solid #ddd; text-align: right; font-weight: bold;">
                <%= @income_statement[:total_revenue].to_f > 0 ? 
                  (100 * @income_statement[:operating_income].to_f / @income_statement[:total_revenue].to_f).round : 
                  0 %>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

    </div>
  </div>
</div>
